% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prepare_plotting.R
\name{prepare_for_plotting}
\alias{prepare_for_plotting}
\title{Prepare ISTAT Data for Plotting}
\usage{
prepare_for_plotting(
  data,
  output_dir = "output",
  prefix = NULL,
  start_time = "",
  freq = NULL,
  save_data = TRUE,
  save_report = TRUE,
  verbose = TRUE
)
}
\arguments{
\item{data}{Either a character string (dataset_id to download) or a data.table
containing raw ISTAT data with ObsDimension and ObsValue columns.}

\item{output_dir}{Character string specifying the output directory for saved files.
Default is "output".}

\item{prefix}{Character string to prepend to output filenames. Default is NULL
(uses dataset_id or "data").}

\item{start_time}{Character string specifying start period for download.
Only used when data is a dataset_id. Default is "".}

\item{freq}{Character string specifying frequency filter (A, Q, M).
Only used when data is a dataset_id. Default is NULL (all frequencies).}

\item{save_data}{Logical indicating whether to save data.rds. Default is TRUE.}

\item{save_report}{Logical indicating whether to save report files. Default is TRUE.}

\item{verbose}{Logical indicating whether to print status messages. Default is TRUE.}
}
\value{
A list with class "istat_plot_ready" containing:
\itemize{
\item data: data.table with labeled data ready for ggplot2
\item report: list with structured metadata and series_stats (data.table with labels)
\item files: list with paths to saved files (data_rds, report_rds)
\item summary: Quick summary of the data (n_rows, n_series, date_range)
}
}
\description{
Downloads or processes ISTAT data, applies labels, extracts non-invariant
columns, computes extended statistics per time series, and saves outputs
for visualization.
}
\examples{
\dontrun{
# From dataset_id (downloads and processes)
result <- prepare_for_plotting("534_50", output_dir = "output")

# From pre-downloaded data
raw_data <- download_istat_data("534_50")
result <- prepare_for_plotting(raw_data, prefix = "job_vacancies")

# Access components
plot_data <- result$data
stats <- result$report$series_stats
}
}
