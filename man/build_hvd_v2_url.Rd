% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hvd_config.R
\name{build_hvd_v2_url}
\alias{build_hvd_v2_url}
\title{Build HVD v2 (SDMX 3.0) URL}
\usage{
build_hvd_v2_url(
  endpoint,
  dataset_id = NULL,
  context = "dataflow",
  agency_id = "IT1",
  version = "~",
  filter = "*",
  component_id = "all",
  start_time = NULL,
  end_time = NULL,
  dim_filters = NULL,
  updated_after = NULL,
  lastNObservations = NULL,
  method = "GET"
)
}
\arguments{
\item{endpoint}{Character string specifying the endpoint type. One of
\code{"data"}, \code{"availability"}, or \code{"structure"}.}

\item{dataset_id}{Character string specifying the ISTAT dataset (resource)
identifier (e.g., \code{"150_908"}). Required for all endpoints.}

\item{context}{Character string specifying the structural metadata context.
Default \code{"dataflow"}.}

\item{agency_id}{Character string identifying the maintenance agency.
Default \code{"IT1"} (ISTAT).}

\item{version}{Character string specifying the resource version. Default
\code{"~"} (latest available version).}

\item{filter}{Character string with the SDMX 3.0 key filter. Default \code{"*"}
(all keys). Ignored when \code{method = "POST"}.}

\item{component_id}{Character string specifying the component to constrain
in availability queries. Default \code{"all"}. Only used for the \code{"availability"}
endpoint.}

\item{start_time}{Character string specifying the start period (e.g.,
\code{"2020"}). Translated to \code{c[TIME_PERIOD]=ge:2020} syntax by
\code{\link[=build_sdmx3_filters]{build_sdmx3_filters()}}.}

\item{end_time}{Character string specifying the end period (e.g., \code{"2025"}).
Translated to \code{c[TIME_PERIOD]=le:2025} syntax by \code{\link[=build_sdmx3_filters]{build_sdmx3_filters()}}.}

\item{dim_filters}{Named list of dimension filters where names are dimension
IDs and values are filter expressions (e.g.,
\code{list(FREQ = "M", REF_AREA = "IT")}). Translated to \code{c[FREQ]=M} syntax.}

\item{updated_after}{Character string in ISO 8601 format for incremental
retrieval.}

\item{lastNObservations}{Integer limiting the response to the last N
observations per time series.}

\item{method}{Character string, either \code{"GET"} (default) or \code{"POST"}.
Controls the URL shape for the \code{data} endpoint.}
}
\value{
Character string containing the constructed URL.
}
\description{
Constructs request URLs for the ISTAT HVD v2 API surface, which follows the
SDMX 3.0 RESTful specification. The key differences from v1 are: (1) the
\verb{/rest/v2/} path prefix, (2) an explicit \code{{context}/{agencyId}/{resourceId}/{version}}
path structure, and (3) the \code{c[DIM]=value} query parameter syntax for
dimension filtering (replacing \code{startPeriod} / \code{endPeriod}).
}
\examples{
\dontrun{
# GET data URL with time range and dimension filter
build_hvd_v2_url("data", dataset_id = "150_908",
                 start_time = "2020", end_time = "2025",
                 dim_filters = list(FREQ = "M"))

# POST data URL
build_hvd_v2_url("data", dataset_id = "150_908", method = "POST")

# Availability URL
build_hvd_v2_url("availability", dataset_id = "150_908")

# Structure URL
build_hvd_v2_url("structure", dataset_id = "150_908")
}

}
\keyword{internal}
